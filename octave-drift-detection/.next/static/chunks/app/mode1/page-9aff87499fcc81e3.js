(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[447],{933:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});var s=t(5155),l=t(2115),a=t(1835),d=t(8126),i=t.n(d),o=t(313);function n(){var e,r,t,d,n,c,x,m,u,h,b;let p=(0,l.useRef)(null),[g,v]=(0,l.useState)(["CCS","JMSL"]),[N,j]=(0,l.useState)({CCS:["CC-Di","CC-MT"],JMSL:["JM-Ch"]}),[f,y]=(0,l.useState)(""),[w,S]=(0,l.useState)(""),[E,C]=(0,l.useState)([]),[D,A]=(0,l.useState)({plotData:[],tableData:[]}),[P,k]=(0,l.useState)(""),[K,L]=(0,l.useState)(null),[R,T]=(0,l.useState)(!0),M=async()=>{T(!0),L(null);try{var e,r;let t=localStorage.getItem("businessUnit"),s=localStorage.getItem("useCase");t&&y(t),s&&S(s);let[l,a,d]=await Promise.all([(0,o.uu)(),(0,o.GS)(),(0,o.pL)()]),i={plotData:Array.isArray(a)?a.map(e=>({x:e.timePeriod||"",y:e.error||0,exceedsThreshold:e.exceedsThreshold||!1})):(null==a?void 0:null===(e=a.plotData)||void 0===e?void 0:e.map(e=>({x:e.timePeriod||"",y:e.error||0,exceedsThreshold:e.exceedsThreshold||!1})))||[],tableData:Array.isArray(a)?a.map(e=>({id:e.id||"ERR-".concat(Date.now()),timePeriod:e.timePeriod||"",meanPrediction:e.meanPrediction||0,error:e.error||0,percentageError:e.percentageError||0,status:e.exceedsThreshold?"Alert":"Normal"})):(null==a?void 0:null===(r=a.tableData)||void 0===r?void 0:r.map(e=>({id:e.id||"ERR-".concat(Date.now()),timePeriod:e.timePeriod||"",meanPrediction:e.meanPrediction||0,error:e.error||0,percentageError:e.percentageError||0,status:e.exceedsThreshold?"Alert":"Normal"})))||[]};C(l),A(i),k(d||"No explanation available"),console.log("RAW BACKEND RESPONSES:",{kpiData:JSON.parse(JSON.stringify(l)),errorData:JSON.parse(JSON.stringify(a)),xaiData:JSON.parse(JSON.stringify(d))})}catch(r){console.error("Error loading data - full error:",r),r instanceof Error?L("Failed to load data: ".concat(r.message)):L("Failed to load data: Unknown error");let e=Array.from({length:10},(e,r)=>({id:"ERR-SAMPLE-".concat(r+1),timePeriod:"2023-01-".concat(String(r+1).padStart(2,"0")),meanPrediction:100*Math.random(),error:20*Math.random(),exceedsThreshold:Math.random()>.7,percentageError:30*Math.random()}));C([{rowKey:"alertTime",value:new Date().toISOString(),status:"Normal"},{rowKey:"runtimeCount",value:"5",status:"Normal"},{rowKey:"alertKeeper",value:"Sample User",status:"Normal"},{rowKey:"kstest",value:"0.12",status:"Normal"},{rowKey:"wasserstein",value:"0.08",status:"Normal"},{rowKey:"mseRef",value:"0.25",status:"Normal"},{rowKey:"mseCurrent",value:"0.32",status:"Warning"},{rowKey:"status",value:"Warning",status:"Warning"}]),A({plotData:e.map(e=>({x:e.timePeriod,y:e.error,exceedsThreshold:e.exceedsThreshold})),tableData:e.map(e=>({id:e.id,timePeriod:e.timePeriod,meanPrediction:e.meanPrediction,error:e.error,percentageError:e.percentageError,status:e.exceedsThreshold?"Alert":"Normal"}))}),k("Sample explanation: The model shows moderate drift with 5.2% precision change and -2.1% recall change")}finally{T(!1)}};return(0,l.useEffect)(()=>{M()},[]),(0,s.jsxs)("div",{className:"bg-gray-900 min-h-screen flex flex-col",children:[(0,s.jsx)(i(),{children:(0,s.jsx)("title",{children:"Mode 1 | Business Dashboard"})}),(0,s.jsxs)("main",{className:"flex-grow container mx-auto px-4 py-8",children:[K&&(0,s.jsxs)("div",{className:"bg-red-900/50 border border-red-700 rounded-lg p-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"h-5 w-5 text-red-300 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-red-300",children:"Backend Error"})]}),(0,s.jsx)("p",{className:"mt-2 text-red-200",children:K}),(0,s.jsx)("p",{className:"mt-2 text-red-200 text-sm",children:"Displaying fallback data. Some features may be limited."}),(0,s.jsx)("button",{onClick:()=>M(),className:"mt-3 px-4 py-2 bg-red-800/50 hover:bg-red-800 text-white rounded-md text-sm font-medium",children:"Retry Connection"})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 mb-6 border border-gray-700",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-blue-300 mb-4",children:"OCTAVE - RG Dashboard"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Business Unit"}),(0,s.jsx)("select",{className:"w-full bg-gray-700 border-blue-600 rounded p-2 text-white",value:f,onChange:e=>{let r=e.target.value;y(r),S(""),localStorage.setItem("businessUnit",r)},children:g.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Use Case"}),(0,s.jsx)("select",{className:"w-full bg-gray-700 border-blue-600 rounded p-2 text-white",value:w,onChange:e=>{let r=e.target.value;S(r),localStorage.setItem("useCase",r)},disabled:!f,children:f&&(null===(e=N[f])||void 0===e?void 0:e.map(e=>(0,s.jsx)("option",{value:e,children:e},e)))})]}),(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Short Code"}),(0,s.jsx)("input",{type:"text",value:f&&w?"".concat(f.substring(0,2),"-").concat(w.substring(0,2)):"-",readOnly:!0,className:"w-full bg-gray-700 border-blue-600 rounded p-2 text-white"})]}),(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Runtime"}),(0,s.jsx)("input",{type:"text",value:"2h 45m",readOnly:!0,className:"w-full bg-gray-700 border-blue-600 rounded p-2 text-white"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Current Alert Time"}),(0,s.jsx)("p",{className:"text-xl",children:R?"Loading...":(null===(r=E.find(e=>"alertTime"===e.rowKey))||void 0===r?void 0:r.value)||"N/A"})]}),(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"No. of Runtime"}),(0,s.jsx)("p",{className:"text-xl",children:R?"Loading...":(null===(t=E.find(e=>"runtimeCount"===e.rowKey))||void 0===t?void 0:t.value)||"0"})]}),(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Alert Keeper"}),(0,s.jsx)("p",{className:"text-xl",children:R?"Loading...":(null===(d=E.find(e=>"alertKeeper"===e.rowKey))||void 0===d?void 0:d.value)||"N/A"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 mb-6 border border-gray-700",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-blue-300 mb-4",children:"MAPE/MSE Plot"}),(0,s.jsx)("div",{className:"h-64 bg-gray-700 rounded p-4",children:R?(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsx)("div",{className:"text-white",children:"Loading plot data..."})}):(0,s.jsx)("div",{className:"relative h-full",children:(0,s.jsx)("canvas",{id:"mapeMseChart",className:"w-full h-full",ref:e=>{if(e&&!R){let r=e.getContext("2d");r&&(p.current&&p.current.destroy(),p.current=new a.t1(r,{type:"line",data:{labels:D.plotData.map(e=>e.x),datasets:[{label:"Error Values",data:D.plotData.map(e=>e.y),borderColor:"rgb(75, 192, 192)",backgroundColor:D.plotData.map(e=>e.exceedsThreshold?"rgba(255, 99, 132, 0.5)":"rgba(54, 162, 235, 0.5)"),borderWidth:2,tension:.1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"#e5e7eb"}},tooltip:{mode:"index",intersect:!1}},scales:{x:{title:{display:!0,text:"Data Points",color:"#93c5fd",font:{weight:"bold"}},grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"#e5e7eb",font:{size:12}}},y:{title:{display:!0,text:"Error Value",color:"#93c5fd",font:{weight:"bold"}},beginAtZero:!0,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"#e5e7eb",font:{size:12},callback:e=>"number"==typeof e?e.toFixed(2):e}}},animation:{duration:1e3,easing:"easeInOutQuad"},elements:{point:{radius:4,hoverRadius:6}}}}))}}})})})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 mb-6 border border-gray-700",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-blue-300 mb-4",children:"Key Performance Indicators"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"KStest"}),(0,s.jsx)("p",{className:"text-xl",children:R?"Loading...":(null===(n=E.find(e=>"kstest"===e.rowKey))||void 0===n?void 0:n.value)||"N/A"})]}),(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Wasserstein"}),(0,s.jsx)("p",{className:"text-xl",children:R?"Loading...":(null===(c=E.find(e=>"wasserstein"===e.rowKey))||void 0===c?void 0:c.value)||"N/A"})]}),(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Ref MSE"}),(0,s.jsx)("p",{className:"text-xl",children:R?"Loading...":(null===(x=E.find(e=>"mseRef"===e.rowKey))||void 0===x?void 0:x.value)||"N/A"})]}),(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"MSE"}),(0,s.jsx)("p",{className:"text-xl",children:R?"Loading...":(null===(m=E.find(e=>"mseCurrent"===e.rowKey))||void 0===m?void 0:m.value)||"N/A"})]}),(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Status"}),(0,s.jsx)("p",{className:"text-xl ".concat(R?"":(null===(u=E.find(e=>"status"===e.rowKey))||void 0===u?void 0:u.value)==="Warning"?"text-yellow-400":(null===(h=E.find(e=>"status"===e.rowKey))||void 0===h?void 0:h.value)==="Error"?"text-red-400":"text-green-400"),children:R?"Loading...":(null===(b=E.find(e=>"status"===e.rowKey))||void 0===b?void 0:b.value)||"N/A"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 mb-6 border border-gray-700",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-blue-300 mb-4",children:"Debug Data"}),(0,s.jsx)("div",{className:"space-y-3 text-white text-xs overflow-auto max-h-60",children:(0,s.jsx)("pre",{children:JSON.stringify({kpis:E,errors:D,xaiExplanation:P},null,2)})})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 mb-6 border border-gray-700",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-blue-300 mb-4",children:"XAI Result"}),(0,s.jsx)("div",{className:"space-y-3 text-white",children:R?(0,s.jsx)("p",{children:"Loading XAI explanation..."}):P?(0,s.jsx)("p",{children:P}):(0,s.jsx)("p",{className:"text-red-400",children:"No explanation available"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 border border-gray-700",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-blue-300 mb-4",children:"Error Comparison"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-200 uppercase tracking-wider",children:"ID"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-200 uppercase tracking-wider",children:"Time Period"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-200 uppercase tracking-wider",children:"Error"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-700",children:D.tableData.slice(0,5).map((e,r)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:e.id}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:e.timePeriod}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-400",children:e.error.toFixed(2)})]},e.id))})]})})]}),(0,s.jsxs)("div",{className:"bg-red-900/20 rounded-xl shadow-md overflow-hidden p-6 border border-red-800/50",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-red-300 mb-4",children:"Threshold Exceedances"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-red-800/50",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-red-200 uppercase tracking-wider",children:"ID"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-red-200 uppercase tracking-wider",children:"Error %"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-red-200 uppercase tracking-wider",children:"Exceeds"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-red-800/50",children:D.tableData.filter(e=>"Alert"===e.status).slice(0,5).map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:e.id}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:[e.percentageError.toFixed(2),"%"]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-300",children:"Alert"===e.status?"Yes":"No"})]},e.id))})]})})]})]})]})]})}a.t1.register(...a.$L)},5353:(e,r,t)=>{Promise.resolve().then(t.bind(t,933))}},e=>{var r=r=>e(e.s=r);e.O(0,[178,589,313,441,684,358],()=>r(5353)),_N_E=e.O()}]);