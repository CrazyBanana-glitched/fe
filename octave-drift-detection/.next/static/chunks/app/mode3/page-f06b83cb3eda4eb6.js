(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[641],{182:(e,l,r)=>{Promise.resolve().then(r.bind(r,1751))},1751:(e,l,r)=>{"use strict";r.r(l),r.d(l,{default:()=>c});var s=r(5155),t=r(2115);r(3843);var d=r(8126),a=r.n(d),i=r(8991),n=r(5426);function c(){var e,l,r,d,c,o,u,x,m,h,b,v,f,p,g,N,j,y,w,A,C,K,B,S,T,P,L,M;let[F,E]=(0,t.useState)("CCS"),[R,k]=(0,t.useState)("CC-Di"),[I,U]=(0,t.useState)([]),[O,_]=(0,t.useState)([]),[D,J]=(0,t.useState)({reference:{trueA:0,falseB:0,falseA:0,trueB:0,precision:0,recall:0,f1:0,accuracy:0},current:{trueA:0,falseB:0,falseA:0,trueB:0,precision:0,recall:0,f1:0,accuracy:0}}),[q,H]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{(async()=>{try{var e,l,r,s,t,d,a,n,c,o,u,x,m,h,b,v;let f=localStorage.getItem("businessUnit"),p=localStorage.getItem("useCase");f&&E(f),p&&k(p);let[g,N]=await Promise.all([(0,i.Ku)("mode3"),(0,i.fC)("mode3")]);U(g.map(e=>({rowKey:e.rowKey,value:e.value,...e.status&&{status:e.status}}))),_(N.map(e=>({predicted:e.predicted||"",actual:e.actual||"",timePeriod:e.timePeriod||"",meanPrediction:Number(e.meanPrediction)||0,error:Number(e.error)||0,exceedsThreshold:!!e.exceedsThreshold,...void 0!==e.yTrue&&{yTrue:Number(e.yTrue)},...void 0!==e.yPred&&{yPred:Number(e.yPred)},...void 0!==e.percentageError&&{percentageError:Number(e.percentageError)}})));let j={reference:{trueA:Number(null===(e=g.find(e=>"refTrueA"===e.rowKey))||void 0===e?void 0:e.value)||0,falseB:Number(null===(l=g.find(e=>"refFalseB"===e.rowKey))||void 0===l?void 0:l.value)||0,falseA:Number(null===(r=g.find(e=>"refFalseA"===e.rowKey))||void 0===r?void 0:r.value)||0,trueB:Number(null===(s=g.find(e=>"refTrueB"===e.rowKey))||void 0===s?void 0:s.value)||0,precision:Number(null===(t=g.find(e=>"refPrecision"===e.rowKey))||void 0===t?void 0:t.value)||0,recall:Number(null===(d=g.find(e=>"refRecall"===e.rowKey))||void 0===d?void 0:d.value)||0,f1:Number(null===(a=g.find(e=>"refF1"===e.rowKey))||void 0===a?void 0:a.value)||0,accuracy:Number(null===(n=g.find(e=>"refAccuracy"===e.rowKey))||void 0===n?void 0:n.value)||0},current:{trueA:Number(null===(c=g.find(e=>"currTrueA"===e.rowKey))||void 0===c?void 0:c.value)||0,falseB:Number(null===(o=g.find(e=>"currFalseB"===e.rowKey))||void 0===o?void 0:o.value)||0,falseA:Number(null===(u=g.find(e=>"currFalseA"===e.rowKey))||void 0===u?void 0:u.value)||0,trueB:Number(null===(x=g.find(e=>"currTrueB"===e.rowKey))||void 0===x?void 0:x.value)||0,precision:Number(null===(m=g.find(e=>"currPrecision"===e.rowKey))||void 0===m?void 0:m.value)||0,recall:Number(null===(h=g.find(e=>"currRecall"===e.rowKey))||void 0===h?void 0:h.value)||0,f1:Number(null===(b=g.find(e=>"currF1"===e.rowKey))||void 0===b?void 0:b.value)||0,accuracy:Number(null===(v=g.find(e=>"currAccuracy"===e.rowKey))||void 0===v?void 0:v.value)||0}};J(j)}catch(e){console.error("Error loading data:",e)}finally{H(!1)}})()},[]),(0,s.jsxs)("div",{className:"bg-gray-900 min-h-screen flex flex-col",children:[(0,s.jsxs)(a(),{children:[(0,s.jsx)("title",{children:"Mode 3 | CL Dashboard"}),(0,s.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"})]}),(0,s.jsxs)("main",{className:"flex-grow container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 mb-6 border border-gray-700",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-blue-300 mb-4",children:"OCTAVE - CL Dashboard"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Business Unit"}),(0,s.jsxs)("select",{className:"w-full bg-gray-700 border-blue-600 rounded p-2 text-white",value:F,onChange:e=>{let l=e.target.value;E(l),k(""),localStorage.setItem("businessUnit",l)},children:[(0,s.jsx)("option",{value:"",children:"Select Business Unit"}),(0,s.jsx)("option",{value:"CCS",children:"CCS"}),(0,s.jsx)("option",{value:"JMSL",children:"JMSL"})]})]}),(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Use Case"}),(0,s.jsxs)("select",{className:"w-full bg-gray-700 border-blue-600 rounded p-2 text-white",value:R,onChange:e=>{let l=e.target.value;k(l),localStorage.setItem("useCase",l)},disabled:!F,children:[(0,s.jsx)("option",{value:"",children:F?"Select Use Case":"Select Business Unit first"}),("CCS"===F?["CC-Di","CC-MT"]:"JMSL"===F?["JM-Ch"]:[]).map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Short Code"}),(0,s.jsx)("input",{type:"text",value:R||"-",readOnly:!0,className:"w-full bg-gray-700 border-blue-600 rounded p-2 text-white"})]}),(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Runtime"}),(0,s.jsx)("input",{type:"text",value:"2h 45m",readOnly:!0,className:"w-full bg-gray-700 border-blue-600 rounded p-2 text-white"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Current Alert Time"}),(0,s.jsx)("p",{className:"text-xl",children:q?"Loading...":(null===(e=I.find(e=>"alertTime"===e.rowKey))||void 0===e?void 0:e.value)||"N/A"})]}),(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"No. of Runtime"}),(0,s.jsx)("p",{className:"text-xl",children:q?"Loading...":(null===(l=I.find(e=>"runtimeCount"===e.rowKey))||void 0===l?void 0:l.value)||"0"})]}),(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Alert Keeper"}),(0,s.jsx)("p",{className:"text-xl",children:q?"Loading...":(null===(r=I.find(e=>"alertKeeper"===e.rowKey))||void 0===r?void 0:r.value)||"N/A"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 border border-gray-700",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-blue-300 mb-4",children:"Reference Confusion Matrix"}),(0,s.jsx)("div",{className:"h-96 bg-gray-700 rounded p-4",children:q?(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsx)("div",{className:"text-white",children:"Loading reference matrix..."})}):(0,s.jsx)(n.A,{data:[[(null===(d=D.reference)||void 0===d?void 0:d.trueA)||0,(null===(c=D.reference)||void 0===c?void 0:c.falseB)||0],[(null===(o=D.reference)||void 0===o?void 0:o.falseA)||0,(null===(u=D.reference)||void 0===u?void 0:u.trueB)||0]],labels:["Class A","Class B"],title:"Reference Matrix",width:500,height:500})}),(0,s.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-2",children:[(0,s.jsxs)("div",{className:"bg-blue-900/20 p-2 rounded",children:[(0,s.jsx)("p",{className:"text-xs text-blue-200",children:"Precision"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-white",children:q?"-":(null===(x=D.reference)||void 0===x?void 0:x.precision)||"N/A"})]}),(0,s.jsxs)("div",{className:"bg-blue-900/20 p-2 rounded",children:[(0,s.jsx)("p",{className:"text-xs text-blue-200",children:"Recall"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-white",children:q?"-":(null===(m=D.reference)||void 0===m?void 0:m.recall)||"N/A"})]}),(0,s.jsxs)("div",{className:"bg-blue-900/20 p-2 rounded",children:[(0,s.jsx)("p",{className:"text-xs text-blue-200",children:"F1"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-white",children:q?"-":(null===(h=D.reference)||void 0===h?void 0:h.f1)||"N/A"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 border border-gray-700",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-blue-300 mb-4",children:"Current Confusion Matrix"}),(0,s.jsx)("div",{className:"h-96 bg-gray-700 rounded p-4",children:q?(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsx)("div",{className:"text-white",children:"Loading current matrix..."})}):(0,s.jsx)(n.A,{data:[[(null===(b=D.current)||void 0===b?void 0:b.trueA)||0,(null===(v=D.current)||void 0===v?void 0:v.falseB)||0],[(null===(f=D.current)||void 0===f?void 0:f.falseA)||0,(null===(p=D.current)||void 0===p?void 0:p.trueB)||0]],labels:["Class A","Class B"],title:"Current Matrix",width:500,height:500})}),(0,s.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-2",children:[(0,s.jsxs)("div",{className:"bg-blue-900/20 p-2 rounded",children:[(0,s.jsx)("p",{className:"text-xs text-blue-200",children:"Precision"}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-white",children:[q?"-":(null===(g=D.current)||void 0===g?void 0:g.precision)||"N/A",!q&&(null===(N=D.current)||void 0===N?void 0:N.precision)&&(0,s.jsxs)("span",{className:"text-red-400 text-sm",children:["(",((D.current.precision-D.reference.precision)/D.reference.precision*100).toFixed(1),"%)"]})]})]}),(0,s.jsxs)("div",{className:"bg-blue-900/20 p-2 rounded",children:[(0,s.jsx)("p",{className:"text-xs text-blue-200",children:"Recall"}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-white",children:[q?"-":(null===(j=D.current)||void 0===j?void 0:j.recall)||"N/A",!q&&(null===(y=D.current)||void 0===y?void 0:y.recall)&&(0,s.jsxs)("span",{className:"text-red-400 text-sm",children:["(",((D.current.recall-D.reference.recall)/D.reference.recall*100).toFixed(1),"%)"]})]})]}),(0,s.jsxs)("div",{className:"bg-blue-900/20 p-2 rounded",children:[(0,s.jsx)("p",{className:"text-xs text-blue-200",children:"F1"}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-white",children:[q?"-":(null===(w=D.current)||void 0===w?void 0:w.f1)||"N/A",!q&&(null===(A=D.current)||void 0===A?void 0:A.f1)&&(0,s.jsxs)("span",{className:"text-red-400 text-sm",children:["(",((D.current.f1-D.reference.f1)/D.reference.f1*100).toFixed(1),"%)"]})]})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 mb-6 border border-gray-700",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-blue-300 mb-4",children:"Key Performance Indicators"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Jensen-Shannon"}),(0,s.jsx)("p",{className:"text-xl",children:q?"Loading...":(null===(C=I.find(e=>"jensenShannon"===e.rowKey))||void 0===C?void 0:C.value)||"N/A"})]}),(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"PSI"}),(0,s.jsx)("p",{className:"text-xl",children:q?"Loading...":(null===(K=I.find(e=>"psi"===e.rowKey))||void 0===K?void 0:K.value)||"N/A"})]}),(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Accuracy (Reference)"}),(0,s.jsx)("p",{className:"text-xl",children:q?"Loading...":(null===(B=D.reference)||void 0===B?void 0:B.accuracy)||"N/A"})]}),(0,s.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Accuracy (Current)"}),(0,s.jsxs)("p",{className:"text-xl",children:[q?"Loading...":(null===(S=D.current)||void 0===S?void 0:S.accuracy)||"N/A",!q&&(null===(T=D.current)||void 0===T?void 0:T.accuracy)&&(0,s.jsxs)("span",{className:"text-red-400 text-sm",children:["(",((D.current.accuracy-D.reference.accuracy)/D.reference.accuracy*100).toFixed(1),"%)"]})]})]})]}),(0,s.jsxs)("div",{className:"mt-4 bg-yellow-900/20 p-4 rounded-lg border border-yellow-800/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-yellow-200 mb-2",children:"Status"}),(0,s.jsx)("p",{className:"text-xl ".concat(q?"":(null===(P=I.find(e=>"status"===e.rowKey))||void 0===P?void 0:P.value)==="Warning"?"text-yellow-300":(null===(L=I.find(e=>"status"===e.rowKey))||void 0===L?void 0:L.value)==="Error"?"text-red-400":"text-green-400"),children:q?"Loading...":(null===(M=I.find(e=>"status"===e.rowKey))||void 0===M?void 0:M.value)||"N/A"})]})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 mb-6 border border-gray-700",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-blue-300 mb-4",children:"XAI Result"}),(0,s.jsxs)("div",{className:"space-y-3 text-white",children:[(0,s.jsx)("p",{children:"The current model shows decreased performance compared to reference values, particularly in precision (8.2% decrease) and recall (8.7% decrease). The confusion matrices reveal increased misclassification rates between Class A and Class B."}),(0,s.jsxs)("ul",{className:"list-disc pl-5 space-y-1",children:[(0,s.jsx)("li",{children:"Class A being predicted as Class B increased by 140% (from 5% to 12%)"}),(0,s.jsx)("li",{children:"Class B being predicted as Class A increased by 166% (from 3% to 8%)"})]}),(0,s.jsx)("p",{children:"The model's F1 score has correspondingly decreased by 8% (from 0.88 to 0.81)."}),(0,s.jsx)("p",{className:"font-medium text-yellow-300",children:"These metrics suggest the model may require retraining or parameter adjustment."})]})]}),(0,s.jsxs)("div",{className:"bg-red-900/20 rounded-xl shadow-md overflow-hidden p-6 mb-6 border border-red-800/50",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-red-300 mb-4",children:"Error and Misclassification Percentages"}),(0,s.jsxs)("div",{className:"space-y-3 text-white",children:[(0,s.jsx)("p",{children:"Overall error rate has increased from 8% to 16% compared to reference data."}),(0,s.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-4",children:(0,s.jsx)("div",{className:"bg-red-500 h-4 rounded-full",style:{width:"16%"}})}),(0,s.jsx)("p",{children:"Key changes in misclassification:"}),(0,s.jsxs)("ul",{className:"list-disc pl-5 space-y-1",children:[(0,s.jsx)("li",{children:"Class A → Class B: +140% (from 5% to 12%)"}),(0,s.jsx)("li",{children:"Class B → Class A: +166% (from 3% to 8%)"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 mb-6 border border-gray-700",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-blue-300 mb-4",children:"Misclassified Table"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-200 uppercase tracking-wider",children:"ID"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-200 uppercase tracking-wider",children:"Predicted"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-200 uppercase tracking-wider",children:"Actual"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-700",children:q?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-white",children:"Loading misclassified data..."})}):O.length>0?O.map((e,l)=>(0,s.jsxs)("tr",{className:"bg-red-900/10",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:l+1}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-300",children:e.predicted}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:e.actual})]},l)):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-white",children:"No misclassified data available"})})})]})})]})]})]})}},5426:(e,l,r)=>{"use strict";r.d(l,{A:()=>a});var s=r(5155),t=r(6660),d=r(2115);function a(e){let{data:l,labels:r,title:a,width:i=500,height:n=500,cellSize:c=40}=e,o=(0,d.useRef)(null);return(0,d.useEffect)(()=>{if(!o.current||!(null==l?void 0:l.length)||!(null==r?void 0:r.length))return;let e=Math.max(100,i||500),s=Math.max(100,n||500),d=Math.max(10,c||40);o.current.innerHTML="";let a={top:30,right:30,bottom:30,left:30};a.left,a.right,a.top,a.bottom;let u=t.Ltv(o.current).append("svg").attr("width",e).attr("height",s).append("g").attr("transform","translate(".concat(a.left,",").concat(a.top,")")),x=t.exT(t.dM).domain([0,t.T9B(l.flat())||1]);u.selectAll("g").data(l).enter().append("g").selectAll("rect").data((e,l)=>e.map((e,r)=>({value:e,x:r,y:l}))).enter().append("rect").attr("x",e=>e.x*d).attr("y",e=>e.y*d).attr("width",d-1).attr("height",d-1).style("fill",e=>x(e.value)).style("stroke","#fff"),u.selectAll(".row-label").data(r).enter().append("text").attr("x",-5).attr("y",(e,l)=>l*d+d/2).style("text-anchor","end").style("fill","#e5e7eb").text(e=>e),u.selectAll(".col-label").data(r).enter().append("text").attr("y",-5).attr("x",(e,l)=>l*d+d/2).style("text-anchor","middle").style("fill","#e5e7eb").text(e=>e)},[l,r,i,n,c]),(0,s.jsxs)("div",{className:"relative h-full w-full",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:a}),(0,s.jsx)("div",{ref:o})]})}},8991:(e,l,r)=>{"use strict";async function s(e){let l=await fetch("/api/metrics?mode=".concat(e));return(await l.json()).map(e=>({rowKey:e.rowKey,value:e.value,...e.status&&{status:e.status}}))}async function t(){let e=await fetch("/api/errors");return(await e.json()).map(e=>({timePeriod:e.timePeriod,meanPrediction:e.meanPrediction,error:e.error,exceedsThreshold:e.exceedsThreshold}))}r.d(l,{Ku:()=>s,fC:()=>t})}},e=>{var l=l=>e(e.s=l);e.O(0,[178,589,113,441,684,358],()=>l(182)),_N_E=e.O()}]);