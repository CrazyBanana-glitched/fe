(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[704],{2186:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>o});var t=l(5155),r=l(2115);l(3843);var a=l(1835),d=l(8126),i=l.n(d),c=l(5426),n=l(8991);function o(){var e,s,l,a,d,o,u,x;(0,r.useRef)(null);let[m,h]=(0,r.useState)("CCS"),[b,p]=(0,r.useState)("CC-Di"),[f,g]=(0,r.useState)([]),[v,j]=(0,r.useState)([]),[N,y]=(0,r.useState)({current:{trueA:0,falseB:0,falseA:0,trueB:0,precision:0,recall:0,f1:0,accuracy:0}}),[w,C]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async()=>{try{var e,s,l,t,r,a,d,i;let c=localStorage.getItem("businessUnit"),o=localStorage.getItem("useCase");c&&h(c),o&&p(o);let[u,x]=await Promise.all([(0,n.Ku)("mode4"),(0,n.fC)("mode4")]);g(u),j(x.map(e=>({timePeriod:e.timePeriod||"",meanPrediction:Number(e.meanPrediction)||0,error:Number(e.error)||0,exceedsThreshold:!!e.exceedsThreshold})));let m={current:{trueA:Number(null===(e=u.find(e=>"currTrueA"===e.rowKey))||void 0===e?void 0:e.value)||0,falseB:Number(null===(s=u.find(e=>"currFalseB"===e.rowKey))||void 0===s?void 0:s.value)||0,falseA:Number(null===(l=u.find(e=>"currFalseA"===e.rowKey))||void 0===l?void 0:l.value)||0,trueB:Number(null===(t=u.find(e=>"currTrueB"===e.rowKey))||void 0===t?void 0:t.value)||0,precision:Number(null===(r=u.find(e=>"currPrecision"===e.rowKey))||void 0===r?void 0:r.value)||0,recall:Number(null===(a=u.find(e=>"currRecall"===e.rowKey))||void 0===a?void 0:a.value)||0,f1:Number(null===(d=u.find(e=>"currF1"===e.rowKey))||void 0===d?void 0:d.value)||0,accuracy:Number(null===(i=u.find(e=>"currAccuracy"===e.rowKey))||void 0===i?void 0:i.value)||0}};y(m)}catch(e){console.error("Error loading data:",e)}finally{C(!1)}})()},[]),(0,t.jsxs)("div",{className:"bg-gray-900 min-h-screen flex flex-col",children:[(0,t.jsxs)(i(),{children:[(0,t.jsx)("title",{children:"Mode 4 | CLCD Dashboard"}),(0,t.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"})]}),(0,t.jsxs)("main",{className:"flex-grow container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 mb-6 border border-gray-700",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-blue-300 mb-4",children:"OCTAVE - CLCD"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Business Unit"}),(0,t.jsxs)("select",{className:"w-full bg-gray-700 border-blue-600 rounded p-2 text-white",value:m,onChange:e=>{let s=e.target.value;h(s),p(""),localStorage.setItem("businessUnit",s)},children:[(0,t.jsx)("option",{value:"CCS",children:"CCS"}),(0,t.jsx)("option",{value:"JMSL",children:"JMSL"})]})]}),(0,t.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Use Case"}),(0,t.jsxs)("select",{className:"w-full bg-gray-700 border-blue-600 rounded p-2 text-white",value:b,onChange:e=>{let s=e.target.value;p(s),localStorage.setItem("useCase",s)},children:[(0,t.jsx)("option",{value:"Distribution Efficiency",children:"Distribution Efficiency"}),(0,t.jsx)("option",{value:"Load Forecasting",children:"Load Forecasting"})]})]}),(0,t.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Short Code"}),(0,t.jsx)("input",{type:"text",value:m&&b?"".concat(m.substring(0,2),"-").concat(b.substring(0,2)):"-",readOnly:!0,className:"w-full bg-gray-700 border-blue-600 rounded p-2 text-white"})]}),(0,t.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Runtime"}),(0,t.jsx)("input",{type:"text",value:w?"Loading...":(null===(e=f.find(e=>"runtime"===e.rowKey))||void 0===e?void 0:e.value)||"N/A",readOnly:!0,className:"w-full bg-gray-700 border-blue-600 rounded p-2 text-white"})]})]}),(0,t.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 mb-6 border border-gray-700",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-blue-300 mb-4",children:"MAPE/MSE Plot"}),(0,t.jsx)("div",{className:"h-64 bg-gray-700 rounded-lg flex items-center justify-center",children:(0,t.jsx)("p",{className:"text-gray-400",children:"Visualization placeholder"})})]})]}),(0,t.jsxs)("div",{className:"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 mb-6 border border-gray-700",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-blue-300 mb-4",children:"Hyperparameters"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Hyperparameters"}),(0,t.jsx)("p",{className:"text-xl",children:"N/A"})]}),(0,t.jsxs)("div",{className:"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:"Status"}),(0,t.jsx)("p",{className:"text-xl",children:"N/A"})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 mb-6 border border-gray-700",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-blue-300 mb-4",children:"Current Confusion Matrix"}),(0,t.jsx)("div",{className:"h-96 bg-gray-700 rounded p-4",children:w?(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)("div",{className:"text-white",children:"Loading current matrix..."})}):(0,t.jsx)(c.A,{data:[[(null===(s=N.current)||void 0===s?void 0:s.trueA)||0,(null===(l=N.current)||void 0===l?void 0:l.falseB)||0],[(null===(a=N.current)||void 0===a?void 0:a.falseA)||0,(null===(d=N.current)||void 0===d?void 0:d.trueB)||0]],labels:["Class A","Class B"],title:"Current Matrix",width:500,height:500})}),(0,t.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-2",children:[(0,t.jsxs)("div",{className:"bg-blue-900/20 p-2 rounded",children:[(0,t.jsx)("p",{className:"text-xs text-blue-200",children:"Precision"}),(0,t.jsx)("p",{className:"text-lg font-semibold text-white",children:w?"-":(null===(o=N.current)||void 0===o?void 0:o.precision)||"N/A"})]}),(0,t.jsxs)("div",{className:"bg-blue-900/20 p-2 rounded",children:[(0,t.jsx)("p",{className:"text-xs text-blue-200",children:"Recall"}),(0,t.jsx)("p",{className:"text-lg font-semibold text-white",children:w?"-":(null===(u=N.current)||void 0===u?void 0:u.recall)||"N/A"})]}),(0,t.jsxs)("div",{className:"bg-blue-900/20 p-2 rounded",children:[(0,t.jsx)("p",{className:"text-xs text-blue-200",children:"F1"}),(0,t.jsx)("p",{className:"text-lg font-semibold text-white",children:w?"-":(null===(x=N.current)||void 0===x?void 0:x.f1)||"N/A"})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 mb-6 border border-gray-700",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-blue-300 mb-4",children:"XAI Result"}),(0,t.jsxs)("div",{className:"space-y-3 text-white",children:[(0,t.jsx)("p",{children:"The current model shows decreased performance compared to reference values, particularly in precision (8.2% decrease) and recall (8.7% decrease). The confusion matrices reveal increased misclassification rates between Class A and Class B."}),(0,t.jsxs)("ul",{className:"list-disc pl-5 space-y-1",children:[(0,t.jsx)("li",{children:"Class A being predicted as Class B increased by 140% (from 5% to 12%)"}),(0,t.jsx)("li",{children:"Class B being predicted as Class A increased by 166% (from 3% to 8%)"})]}),(0,t.jsx)("p",{children:"The model's F1 score has correspondingly decreased by 8% (from 0.88 to 0.81)."}),(0,t.jsx)("p",{className:"font-medium text-yellow-300",children:"These metrics suggest the model may require retraining or parameter adjustment."})]})]}),(0,t.jsxs)("div",{className:"bg-red-900/20 rounded-xl shadow-md overflow-hidden p-6 mb-6 border border-red-800/50",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-red-300 mb-4",children:"Error and Misclassification Percentages"}),(0,t.jsxs)("div",{className:"space-y-3 text-white",children:[(0,t.jsx)("p",{children:"Overall error rate has increased from 8% to 16% compared to reference data."}),(0,t.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-4",children:(0,t.jsx)("div",{className:"bg-red-500 h-4 rounded-full",style:{width:"16%"}})}),(0,t.jsx)("p",{children:"Key changes in misclassification:"}),(0,t.jsxs)("ul",{className:"list-disc pl-5 space-y-1",children:[(0,t.jsx)("li",{children:"Class A → Class B: +140% (from 5% to 12%)"}),(0,t.jsx)("li",{children:"Class B → Class A: +166% (from 3% to 8%)"})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 mb-6 border border-gray-700",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-blue-300 mb-4",children:"Misclassified Table"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-200 uppercase tracking-wider",children:"ID"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-200 uppercase tracking-wider",children:"Predicted"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-200 uppercase tracking-wider",children:"Actual"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-700",children:w?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-white",children:"Loading misclassified data..."})}):v.length>0?v.map((e,s)=>(0,t.jsxs)("tr",{className:"bg-red-900/10",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:s+1}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-300",children:e.predicted}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:e.actual})]},s)):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-white",children:"No misclassified data available"})})})]})})]})]})]})}a.t1.register(...a.$L)},4616:(e,s,l)=>{Promise.resolve().then(l.bind(l,2186))},5426:(e,s,l)=>{"use strict";l.d(s,{A:()=>d});var t=l(5155),r=l(6660),a=l(2115);function d(e){let{data:s,labels:l,title:d,width:i=500,height:c=500,cellSize:n=40}=e,o=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(!o.current||!(null==s?void 0:s.length)||!(null==l?void 0:l.length))return;let e=Math.max(100,i||500),t=Math.max(100,c||500),a=Math.max(10,n||40);o.current.innerHTML="";let d={top:30,right:30,bottom:30,left:30};d.left,d.right,d.top,d.bottom;let u=r.Ltv(o.current).append("svg").attr("width",e).attr("height",t).append("g").attr("transform","translate(".concat(d.left,",").concat(d.top,")")),x=r.exT(r.dM).domain([0,r.T9B(s.flat())||1]);u.selectAll("g").data(s).enter().append("g").selectAll("rect").data((e,s)=>e.map((e,l)=>({value:e,x:l,y:s}))).enter().append("rect").attr("x",e=>e.x*a).attr("y",e=>e.y*a).attr("width",a-1).attr("height",a-1).style("fill",e=>x(e.value)).style("stroke","#fff"),u.selectAll(".row-label").data(l).enter().append("text").attr("x",-5).attr("y",(e,s)=>s*a+a/2).style("text-anchor","end").style("fill","#e5e7eb").text(e=>e),u.selectAll(".col-label").data(l).enter().append("text").attr("y",-5).attr("x",(e,s)=>s*a+a/2).style("text-anchor","middle").style("fill","#e5e7eb").text(e=>e)},[s,l,i,c,n]),(0,t.jsxs)("div",{className:"relative h-full w-full",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-blue-200 mb-2",children:d}),(0,t.jsx)("div",{ref:o})]})}},8991:(e,s,l)=>{"use strict";async function t(e){let s=await fetch("/api/metrics?mode=".concat(e));return(await s.json()).map(e=>({rowKey:e.rowKey,value:e.value,...e.status&&{status:e.status}}))}async function r(){let e=await fetch("/api/errors");return(await e.json()).map(e=>({timePeriod:e.timePeriod,meanPrediction:e.meanPrediction,error:e.error,exceedsThreshold:e.exceedsThreshold}))}l.d(s,{Ku:()=>t,fC:()=>r})}},e=>{var s=s=>e(e.s=s);e.O(0,[178,589,113,441,684,358],()=>s(4616)),_N_E=e.O()}]);