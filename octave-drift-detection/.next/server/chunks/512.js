exports.id=512,exports.ids=[512],exports.modules={167:(e,r,t)=>{"use strict";t.d(r,{GS:()=>h,Vc:()=>n,k$:()=>d,pL:()=>l,sA:()=>i,uu:()=>a});let o="http://localhost:5000/api";async function s(e,r={},t=3){try{let t=await fetch(e,r);if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);return t}catch(o){if(t<=0)throw o;return console.warn(`Retrying ${e} (${3-t+1}/3)`),await new Promise(e=>setTimeout(e,1e3)),s(e,r,t-1)}}async function a(e=3){try{let r=await s(`${o}/metrics/1`);console.log("API response status:",r.status),console.log("API response headers:",Object.fromEntries(r.headers.entries()));let t=await r.text();console.log("Raw API response:",t),console.log("Response length:",t.length);try{let o;let s=t.trim(),n=null;for(let e of[/^[A-Z0-9]{5,8}$/i,/^"[A-Z0-9]{5,8}"$/i,/(?:code|error)[":\s]+([A-Z0-9]{5,8})/i,/(?:error|code)[":\s]+([A-Z0-9]{5,8})/i]){let r=s.match(e);if(r){n=r[0].replace(/["{}[\]]/g,"");break}}if(n){let o={code:n,status:r.status,headers:Object.fromEntries(r.headers.entries()),url:r.url,timestamp:new Date().toISOString(),rawResponse:t,retryAttempt:3-e+1};if(console.error("Backend error detected:",o),e>0)return console.warn(`Retrying due to backend error code (${s})...`),await new Promise(e=>setTimeout(e,1e3)),a(e-1);throw Error(`Backend service temporarily unavailable (code: ${s})`)}if(!(s.startsWith("{")||s.startsWith("[")))throw console.error("Unexpected non-JSON response:",{response:s,status:r.status,headers:Object.fromEntries(r.headers.entries())}),Error(`Unexpected API response format: ${s.substring(0,20)}...`);try{try{o=JSON.parse(s)}catch(l){let e=s.search(/[{\[]/);if(-1===e)throw Error("No JSON found in response");let r=e,t=0,a=!1,n=!1;for(let o=e;o<s.length;o++){let e=s[o];if(n){n=!1;continue}if("\\"===e){n=!0;continue}if('"'===e){a=!a;continue}if(!a&&(("{"===e||"["===e)&&t++,("}"===e||"]"===e)&&t--,0===t)){r=o;break}}let i=s.substring(e,r+1);o=JSON.parse(i)}}catch(t){let e=t instanceof Error?t:Error(String(t));throw console.error("JSON parse error:",{error:e.message,response:s,status:r.status,headers:Object.fromEntries(r.headers.entries()),stack:e.stack}),Error(`API response parsing failed: ${e.message}`)}if(Array.isArray(o)&&(o={kpis:o}),!o||!o.kpis)throw console.error("Invalid KPIs format:",{response:o,status:r.status,headers:Object.fromEntries(r.headers.entries())}),Error("Invalid KPIs response format - missing kpis array");if(!Array.isArray(o.kpis))throw console.error("KPIs is not an array:",o.kpis),Error("Invalid KPIs array format");let i=o.kpis.map(e=>{if(!e.rowKey||!e.value)throw console.error("Invalid KPI format:",e),Error("Missing required KPI fields");return"status"===e.rowKey?{rowKey:"Status",value:e.value,status:e.value}:{rowKey:e.rowKey,value:e.value,status:"Normal"}});return console.log("Processed KPIs:",i),i}catch(e){throw console.error("JSON parse error:",e,"on text:",t),Error("Failed to parse API response")}}catch(e){throw console.error("Failed to fetch mode1 KPIs:",e),Error("Failed to fetch KPIs. Please try again later.")}}async function n(e){try{let r;let t=e?`${o}/metrics/2/${e}`:`${o}/metrics/2`,a=await s(t),n=await a.text();if(!a.ok)return console.warn("API returned non-OK status, using mock data"),c();try{r=JSON.parse(n)}catch(e){throw console.error("Failed to parse API response:",e),Error("Invalid API response format")}let i=Array.isArray(r)?r:r?.kpis||[];if(0===i.length)return console.warn("Empty KPIs array received, using mock data"),c();return i.map(e=>{if(!e.rowKey||void 0===e.value)throw console.warn("Invalid KPI format:",e),Error("Invalid KPI response format");return{rowKey:e.rowKey,value:String(e.value),status:e.status||"Normal",businessUnit:e.businessUnit,useCase:e.useCase,...e.id&&{id:e.id}}})}catch(e){if(console.error("Failed to fetch mode2 KPIs:",e),e instanceof Error)throw Error(`Failed to fetch KPIs: ${e.message}`);throw Error("Failed to fetch KPIs. Please try again later.")}}async function i(){try{let e=await s(`${o}/metrics/3`),r=await e.json();if(!Array.isArray(r))throw Error("Invalid KPIs response format");return r}catch(e){throw console.error("Failed to fetch mode3 KPIs:",e),Error("Failed to fetch KPIs. Please try again later.")}}async function l(){try{let e=await s(`${o}/xai/1`),r=await e.json();if("string"==typeof r)return r;if(r?.text)return r.text;throw Error("Invalid XAI response format")}catch(e){throw console.error("Failed to fetch mode1 XAI data:",e),Error("Failed to fetch XAI data. Please try again later.")}}async function d(e){try{let r=e?`${o}/xai/2/${e}`:`${o}/xai/2`,t=await s(r),a=await t.json();if(!t.ok)throw Error(`API returned status ${t.status}`);if("string"==typeof a)return a;if(a?.text)return a.text;if(a?.explanation)return a.explanation;throw Error("Invalid XAI response format")}catch(e){if(console.error("Failed to fetch mode2 XAI data:",e),e instanceof Error)throw Error(`Failed to fetch XAI data: ${e.message}`);throw Error("Failed to fetch XAI data. Please try again later.")}}function c(){let e=new Date,r=["CCS","JMSL"],t={CCS:["CC-Di","CC-MT"],JMSL:["JM-Ch"]},o=r[Math.floor(Math.random()*r.length)];return[{rowKey:"alertTime",value:new Date(e.getTime()-1728e5*Math.random()).toISOString(),status:"Normal",businessUnit:o,useCase:t[o][0]},{rowKey:"runtimeCount",value:Math.floor(300*Math.random()).toString(),status:"Normal",businessUnit:o,useCase:t[o][0]},{rowKey:"alertKeeper",value:`${o} Admin`,status:"Normal",businessUnit:o,useCase:t[o][0]},{rowKey:"currentDrift1",value:Math.random().toFixed(2),status:Math.random()>.8?"Warning":"Normal",businessUnit:o,useCase:t[o][0]},{rowKey:"currentDrift2",value:Math.random().toFixed(2),status:Math.random()>.8?"Warning":"Normal",businessUnit:o,useCase:t[o][0]},{rowKey:"status",value:Math.random()>.9?"Error":Math.random()>.7?"Warning":"Normal",status:Math.random()>.9?"Error":Math.random()>.7?"Warning":"Normal",businessUnit:o,useCase:t[o][0]},{rowKey:"businessUnit",value:o,status:"Normal",businessUnit:o,useCase:t[o][0]},{rowKey:"useCase",value:t[o][0],status:"Normal",businessUnit:o,useCase:t[o][0]}]}async function h(){try{let e;let r=await s(`${o}/errors`),t=await r.text();if(!r.ok)throw Error(`API returned status ${r.status}`);try{e=JSON.parse(t)}catch(e){throw console.error("Failed to parse errors response:",e,"Response:",t),Error("Invalid errors response format")}if(!e)throw Error("Empty errors response");let a=Array.isArray(e)?{plotData:[],tableData:e}:e,n=(a.plotData||[]).map(e=>{let r=e.timePeriod||new Date().toISOString(),t="number"==typeof e.error?e.error:0;return{x:r,y:t,exceedsThreshold:!!e.exceedsThreshold}}),i=(a.tableData||[]).map(e=>{let r=e.timePeriod||new Date().toISOString(),t="number"==typeof e.meanPrediction?e.meanPrediction:0,o="number"==typeof e.error?e.error:0,s="number"==typeof e.percentageError?e.percentageError:0;return{id:e.id||"",timePeriod:r,meanPrediction:t,error:o,percentageError:s,status:e.exceedsThreshold?"Alert":"Normal"}});if(0===n.length&&0===i.length){console.warn("No error data received, generating sample data");let e=Array.from({length:10},(e,r)=>({id:`MISSING_BACKEND_ID_${r}`,timePeriod:new Date(Date.now()-864e5*r).toISOString(),meanPrediction:100*Math.random(),error:20*Math.random(),exceedsThreshold:Math.random()>.7,percentageError:30*Math.random()}));return{plotData:e.map(e=>({x:e.timePeriod||new Date().toISOString(),y:e.error||0,exceedsThreshold:!!e.exceedsThreshold})),tableData:e.map(e=>({id:e.id||"",timePeriod:e.timePeriod||new Date().toISOString(),meanPrediction:e.meanPrediction||0,error:e.error||0,percentageError:e.percentageError||0,status:e.exceedsThreshold?"Alert":"Normal"}))}}return{plotData:n,tableData:i}}catch(r){console.error("Failed to fetch errors:",r);let e=Array.from({length:10},(e,r)=>({id:`MISSING_BACKEND_ID_${r}`,timePeriod:new Date(Date.now()-864e5*r).toISOString(),meanPrediction:100*Math.random(),error:20*Math.random(),exceedsThreshold:Math.random()>.7,percentageError:30*Math.random()}));return{plotData:e.map(e=>({x:e.timePeriod||new Date().toISOString(),y:e.error||0,exceedsThreshold:!!e.exceedsThreshold})),tableData:e.map(e=>({id:e.id||"",timePeriod:e.timePeriod||new Date().toISOString(),meanPrediction:e.meanPrediction||0,error:e.error||0,percentageError:e.percentageError||0,status:e.exceedsThreshold?"Alert":"Normal"}))}}}},1028:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,6444,23)),Promise.resolve().then(t.t.bind(t,6042,23)),Promise.resolve().then(t.t.bind(t,8170,23)),Promise.resolve().then(t.t.bind(t,9477,23)),Promise.resolve().then(t.t.bind(t,9345,23)),Promise.resolve().then(t.t.bind(t,2089,23)),Promise.resolve().then(t.t.bind(t,6577,23)),Promise.resolve().then(t.t.bind(t,1307,23))},1135:()=>{},3764:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,6346,23)),Promise.resolve().then(t.t.bind(t,7924,23)),Promise.resolve().then(t.t.bind(t,5656,23)),Promise.resolve().then(t.t.bind(t,2480,23)),Promise.resolve().then(t.t.bind(t,8243,23)),Promise.resolve().then(t.t.bind(t,8827,23)),Promise.resolve().then(t.t.bind(t,2763,23)),Promise.resolve().then(t.t.bind(t,7173,23))},5912:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var o=t(7413);t(1120);var s=t(4536),a=t.n(s),n=t(3384);function i(){return(0,o.jsx)("header",{className:"bg-[#96FFE6] py-6 shadow-md",children:(0,o.jsxs)("div",{className:"container mx-auto px-4 flex justify-between items-center",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(n.default,{src:"https://www.octave.lk/wp-content/uploads/2023/11/logo.png",alt:"OCTAVE Logo",width:120,height:40,className:"h-10 mr-4"}),(0,o.jsx)("h1",{className:"text-3xl font-bold text-[#F910B2]",children:"Drift Detection Tool"})]}),(0,o.jsx)("nav",{children:(0,o.jsxs)(a(),{href:"/",className:"text-[#F910B2] hover:text-[#d40e9a]",children:[(0,o.jsx)("i",{className:"fas fa-home"})," Home"]})})]})})}function l({children:e}){return(0,o.jsx)("html",{lang:"en",className:"dark",children:(0,o.jsxs)("body",{className:"bg-gray-900 text-gray-100",children:[(0,o.jsx)(i,{}),(0,o.jsx)("main",{className:"min-h-screen",children:e})]})})}t(1135)},9359:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,4536,23)),Promise.resolve().then(t.t.bind(t,9603,23))},9607:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,5814,23)),Promise.resolve().then(t.t.bind(t,6533,23))}};