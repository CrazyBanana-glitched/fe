{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/User/Downloads/db__-main/db__-main/octave-drift-detection/src/services/backendService.ts"],"sourcesContent":["import { KPI, PlotDataPoint, TableDataPoint, RawErrorData } from '../types/dbTypes';\r\n\r\nconst API_BASE = 'http://localhost:5000/api';\r\nconst MAX_RETRIES = 3;\r\nconst RETRY_DELAY = 1000; // 1 second\r\n\r\n\r\nasync function fetchWithRetry(url: string, options: RequestInit = {}, retries = MAX_RETRIES): Promise<globalThis.Response> {\r\n  try {\r\n    const response = await fetch(url, options);\r\n    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\r\n    return response;\r\n  } catch (error) {\r\n    if (retries <= 0) throw error;\r\n    console.warn(`Retrying ${url} (${MAX_RETRIES - retries + 1}/${MAX_RETRIES})`);\r\n    await new Promise(resolve => setTimeout(resolve, RETRY_DELAY));\r\n    return fetchWithRetry(url, options, retries - 1);\r\n  }\r\n}\r\n\r\nexport async function fetchBusinessUnits(): Promise<string[]> {\r\n  try {\r\n    const response = await fetchWithRetry(`${API_BASE}/businessUnits`);\r\n    const data = await response.json();\r\n    if (!Array.isArray(data)) {\r\n      throw new Error('Invalid business units response format');\r\n    }\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Failed to fetch business units:', error);\r\n    throw new Error('Failed to fetch business units. Please try again later.');\r\n  }\r\n}\r\n\r\nexport async function fetchMode1KPIs(retries = MAX_RETRIES): Promise<KPI[]> {\r\n  try {\r\n    const response = await fetchWithRetry(`${API_BASE}/metrics/1`);\r\n    console.log('API response status:', response.status);\r\n    console.log('API response headers:', Object.fromEntries(response.headers.entries()));\r\n    const text = await response.text();\r\n    console.log('Raw API response:', text);\r\n    console.log('Response length:', text.length);\r\n    \r\n    try {\r\n      // First clean the response text\r\n      const cleanedText = text.trim();\r\n      \r\n      // Enhanced error code detection with better pattern matching\r\n      const errorCodePatterns = [\r\n        /^[A-Z0-9]{5,8}$/i,                // Case-insensitive plain error code\r\n        /^\"[A-Z0-9]{5,8}\"$/i,              // Case-insensitive quoted error code  \r\n        /(?:code|error)[\":\\s]+([A-Z0-9]{5,8})/i, // Matches \"code\":\"ABC123\" or error: \"ABC123\"\r\n        /(?:error|code)[\":\\s]+([A-Z0-9]{5,8})/i  // Matches error:\"ABC123\" or code: \"ABC123\"\r\n      ];\r\n      \r\n      let errorCode = null;\r\n      for (const pattern of errorCodePatterns) {\r\n        const match = cleanedText.match(pattern);\r\n        if (match) {\r\n          errorCode = match[0].replace(/[\"{}[\\]]/g, ''); // Clean the code\r\n          break;\r\n        }\r\n      }\r\n      \r\n      if (errorCode) {\r\n        const errorDetails = {\r\n          code: errorCode,\r\n          status: response.status,\r\n          headers: Object.fromEntries(response.headers.entries()),\r\n          url: response.url,\r\n          timestamp: new Date().toISOString(),\r\n          rawResponse: text,\r\n          retryAttempt: MAX_RETRIES - retries + 1\r\n        };\r\n        console.error('Backend error detected:', errorDetails);\r\n        \r\n        // If we have retries left, automatically retry\r\n        if (retries > 0) {\r\n          console.warn(`Retrying due to backend error code (${cleanedText})...`);\r\n          await new Promise(resolve => setTimeout(resolve, RETRY_DELAY));\r\n          return fetchMode1KPIs(retries - 1);\r\n        }\r\n        \r\n        throw new Error(`Backend service temporarily unavailable (code: ${cleanedText})`);\r\n      }\r\n      \r\n      // Check if response looks like JSON (starts with { or [)\r\n      if (!(cleanedText.startsWith('{') || cleanedText.startsWith('['))) {\r\n        console.error('Unexpected non-JSON response:', {\r\n          response: cleanedText,\r\n          status: response.status,\r\n          headers: Object.fromEntries(response.headers.entries())\r\n        });\r\n        throw new Error(`Unexpected API response format: ${cleanedText.substring(0, 20)}...`);\r\n      }\r\n\r\n      let data;\r\n      try {\r\n        // First try parsing the cleaned text directly\r\n        try {\r\n          data = JSON.parse(cleanedText);\r\n        } catch (initialError) {\r\n          // If direct parse fails, try extracting JSON\r\n          const jsonStart = cleanedText.search(/[{\\[]/);\r\n          if (jsonStart === -1) {\r\n            throw new Error('No JSON found in response');\r\n          }\r\n          \r\n          // More robust JSON extraction that handles nested structures\r\n          let jsonEnd = jsonStart;\r\n          let bracketCount = 0;\r\n          let inString = false;\r\n          let escapeNext = false;\r\n          \r\n          for (let i = jsonStart; i < cleanedText.length; i++) {\r\n            const char = cleanedText[i];\r\n            \r\n            if (escapeNext) {\r\n              escapeNext = false;\r\n              continue;\r\n            }\r\n            \r\n            if (char === '\\\\') {\r\n              escapeNext = true;\r\n              continue;\r\n            }\r\n            \r\n            if (char === '\"') {\r\n              inString = !inString;\r\n              continue;\r\n            }\r\n            \r\n            if (!inString) {\r\n              if (char === '{' || char === '[') bracketCount++;\r\n              if (char === '}' || char === ']') bracketCount--;\r\n              if (bracketCount === 0) {\r\n                jsonEnd = i;\r\n                break;\r\n              }\r\n            }\r\n          }\r\n          \r\n          const jsonText = cleanedText.substring(jsonStart, jsonEnd + 1);\r\n          data = JSON.parse(jsonText);\r\n        }\r\n    } catch (err) {\r\n        const parseError = err instanceof Error ? err : new Error(String(err));\r\n        console.error('JSON parse error:', {\r\n          error: parseError.message,\r\n          response: cleanedText,\r\n          status: response.status,\r\n          headers: Object.fromEntries(response.headers.entries()),\r\n          stack: parseError.stack\r\n        });\r\n        throw new Error(`API response parsing failed: ${parseError.message}`);\r\n      }\r\n\r\n      // Handle both array and object response formats\r\n      if (Array.isArray(data)) {\r\n        // If response is an array, assume it's the kpis array\r\n        data = { kpis: data };\r\n      }\r\n\r\n      // Validate the data structure\r\n      if (!data || !data.kpis) {\r\n        console.error('Invalid KPIs format:', {\r\n          response: data,\r\n          status: response.status,\r\n          headers: Object.fromEntries(response.headers.entries())\r\n        });\r\n        throw new Error('Invalid KPIs response format - missing kpis array');\r\n      }\r\n\r\n      if (!Array.isArray(data.kpis)) {\r\n        console.error('KPIs is not an array:', data.kpis);\r\n        throw new Error('Invalid KPIs array format');\r\n      }\r\n\r\n      // Process each KPI and remove the ID field\r\n      const processedKPIs = data.kpis.map((kpi: any) => {\r\n        if (!kpi.rowKey || !kpi.value) {\r\n          console.error('Invalid KPI format:', kpi);\r\n          throw new Error('Missing required KPI fields');\r\n        }\r\n\r\n        // Special handling for status KPI\r\n        if (kpi.rowKey === 'status') {\r\n          return {\r\n            rowKey: 'Status',\r\n            value: kpi.value,\r\n            status: kpi.value // Use value as status\r\n          };\r\n        }\r\n\r\n        // For all other KPIs\r\n        return {\r\n          rowKey: kpi.rowKey,\r\n          value: kpi.value,\r\n          status: 'Normal' // Default status\r\n        };\r\n      });\r\n\r\n      console.log('Processed KPIs:', processedKPIs);\r\n      return processedKPIs;\r\n    } catch (parseError: unknown) {\r\n      console.error('JSON parse error:', parseError, 'on text:', text);\r\n      throw new Error('Failed to parse API response');\r\n    }\r\n  } catch (error) {\r\n    console.error('Failed to fetch mode1 KPIs:', error);\r\n    throw new Error('Failed to fetch KPIs. Please try again later.');\r\n  }\r\n}\r\n\r\ninterface KPIResponse {\r\n  rowKey: string;\r\n  value: string;\r\n  status?: string;\r\n  businessUnit?: string;\r\n  useCase?: string;\r\n  id?: string;\r\n}\r\n\r\nexport async function fetchMode2KPIs(businessUnit?: string): Promise<KPI[]> {\r\n  try {\r\n    const url = businessUnit \r\n      ? `${API_BASE}/metrics/2/${businessUnit}`\r\n      : `${API_BASE}/metrics/2`;\r\n      \r\n    const response = await fetchWithRetry(url);\r\n    const text = await response.text();\r\n    \r\n    if (!response.ok) {\r\n      console.warn('API returned non-OK status, using mock data');\r\n      return generateMockKPIs();\r\n    }\r\n\r\n    let data;\r\n    try {\r\n      data = JSON.parse(text);\r\n    } catch (parseError) {\r\n      console.error('Failed to parse API response:', parseError);\r\n      throw new Error('Invalid API response format');\r\n    }\r\n\r\n    // Handle both direct array response and wrapped {kpis: [...]} format\r\n    const kpis: KPIResponse[] = Array.isArray(data) ? data : (data?.kpis || []);\r\n    \r\n    if (kpis.length === 0) {\r\n      console.warn('Empty KPIs array received, using mock data');\r\n      return generateMockKPIs();\r\n    }\r\n\r\n    // Enhanced response processing with better type checking\r\n    return kpis.map(kpi => {\r\n      if (!kpi.rowKey || kpi.value === undefined) {\r\n        console.warn('Invalid KPI format:', kpi);\r\n        throw new Error('Invalid KPI response format');\r\n      }\r\n\r\n      return {\r\n        rowKey: kpi.rowKey,\r\n        value: String(kpi.value),\r\n        status: kpi.status || 'Normal',\r\n        businessUnit: kpi.businessUnit,\r\n        useCase: kpi.useCase,\r\n        ...(kpi.id && { id: kpi.id }) // Preserve ID if present\r\n      };\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to fetch mode2 KPIs:', error);\r\n    if (error instanceof Error) {\r\n      throw new Error(`Failed to fetch KPIs: ${error.message}`);\r\n    }\r\n    throw new Error('Failed to fetch KPIs. Please try again later.');\r\n  }\r\n}\r\n\r\nexport async function fetchMode3KPIs(): Promise<KPI[]> {\r\n  try {\r\n    const response = await fetchWithRetry(`${API_BASE}/metrics/3`);\r\n    const data = await response.json();\r\n    \r\n    if (!Array.isArray(data)) {\r\n      throw new Error('Invalid KPIs response format');\r\n    }\r\n\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Failed to fetch mode3 KPIs:', error);\r\n    throw new Error('Failed to fetch KPIs. Please try again later.');\r\n  }\r\n}\r\n\r\nexport async function fetchMode4KPIs(): Promise<KPI[]> {\r\n  try {\r\n    const response = await fetchWithRetry(`${API_BASE}/metrics/4`);\r\n    const data = await response.json();\r\n    \r\n    if (!Array.isArray(data)) {\r\n      throw new Error('Invalid KPIs response format');\r\n    }\r\n\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Failed to fetch mode4 KPIs:', error);\r\n    throw new Error('Failed to fetch KPIs. Please try again later.');\r\n  }\r\n}\r\n\r\nexport async function fetchMode1XAIData(): Promise<string> {\r\n  try {\r\n    const response = await fetchWithRetry(`${API_BASE}/xai/1`);\r\n    const data = await response.json();\r\n    \r\n    if (typeof data === 'string') {\r\n      return data;\r\n    } else if (data?.text) {\r\n      return data.text;\r\n    }\r\n    throw new Error('Invalid XAI response format');\r\n  } catch (error) {\r\n    console.error('Failed to fetch mode1 XAI data:', error);\r\n    throw new Error('Failed to fetch XAI data. Please try again later.');\r\n  }\r\n}\r\n\r\nexport async function fetchMode2XAIData(businessUnit?: string): Promise<string> {\r\n  try {\r\n    const url = businessUnit \r\n      ? `${API_BASE}/xai/2/${businessUnit}`\r\n      : `${API_BASE}/xai/2`;\r\n      \r\n    const response = await fetchWithRetry(url);\r\n    const data = await response.json();\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`API returned status ${response.status}`);\r\n    }\r\n\r\n    // Handle both string and object response formats\r\n    if (typeof data === 'string') {\r\n      return data;\r\n    } else if (data?.text) {\r\n      return data.text;\r\n    } else if (data?.explanation) {\r\n      return data.explanation;\r\n    }\r\n    \r\n    throw new Error('Invalid XAI response format');\r\n  } catch (error) {\r\n    console.error('Failed to fetch mode2 XAI data:', error);\r\n    if (error instanceof Error) {\r\n      throw new Error(`Failed to fetch XAI data: ${error.message}`);\r\n    }\r\n    throw new Error('Failed to fetch XAI data. Please try again later.');\r\n  }\r\n}\r\n\r\ntype BusinessUnit = 'CCS' | 'JMSL';\r\n\r\nfunction generateMockKPIs(): KPI[] {\r\n  const now = new Date();\r\n  const businessUnits: BusinessUnit[] = ['CCS', 'JMSL'];\r\n  const useCases: Record<BusinessUnit, string[]> = {\r\n    'CCS': ['CC-Di', 'CC-MT'],\r\n    'JMSL': ['JM-Ch']\r\n  };\r\n  const selectedBU = businessUnits[Math.floor(Math.random() * businessUnits.length)] as BusinessUnit;\r\n  \r\n  return [\r\n    {\r\n      rowKey: 'alertTime',\r\n      value: new Date(now.getTime() - Math.random() * 48 * 60 * 60 * 1000).toISOString(),\r\n      status: 'Normal',\r\n      businessUnit: selectedBU,\r\n      useCase: useCases[selectedBU][0]\r\n    },\r\n    {\r\n      rowKey: 'runtimeCount', \r\n      value: Math.floor(Math.random() * 300).toString(),\r\n      status: 'Normal',\r\n      businessUnit: selectedBU,\r\n      useCase: useCases[selectedBU][0]\r\n    },\r\n    {\r\n      rowKey: 'alertKeeper',\r\n      value: `${selectedBU} Admin`,\r\n      status: 'Normal',\r\n      businessUnit: selectedBU,\r\n      useCase: useCases[selectedBU][0]\r\n    },\r\n    {\r\n      rowKey: 'currentDrift1',\r\n      value: Math.random().toFixed(2),\r\n      status: Math.random() > 0.8 ? 'Warning' : 'Normal',\r\n      businessUnit: selectedBU,\r\n      useCase: useCases[selectedBU][0]\r\n    },\r\n    {\r\n      rowKey: 'currentDrift2',\r\n      value: Math.random().toFixed(2),\r\n      status: Math.random() > 0.8 ? 'Warning' : 'Normal',\r\n      businessUnit: selectedBU,\r\n      useCase: useCases[selectedBU][0]\r\n    },\r\n    {\r\n      rowKey: 'status',\r\n      value: Math.random() > 0.9 ? 'Error' : (Math.random() > 0.7 ? 'Warning' : 'Normal'),\r\n      status: Math.random() > 0.9 ? 'Error' : (Math.random() > 0.7 ? 'Warning' : 'Normal'),\r\n      businessUnit: selectedBU,\r\n      useCase: useCases[selectedBU][0]\r\n    },\r\n    {\r\n      rowKey: 'businessUnit',\r\n      value: selectedBU,\r\n      status: 'Normal',\r\n      businessUnit: selectedBU,\r\n      useCase: useCases[selectedBU][0]\r\n    },\r\n    {\r\n      rowKey: 'useCase',\r\n      value: useCases[selectedBU][0],\r\n      status: 'Normal',\r\n      businessUnit: selectedBU,\r\n      useCase: useCases[selectedBU][0]\r\n    }\r\n  ];\r\n}\r\n\r\nexport async function checkBackendHealth(): Promise<boolean> {\r\n  try {\r\n    const response = await fetchWithRetry(`${API_BASE}/health`, {}, 1); // Only retry once for health check\r\n    return response.ok;\r\n  } catch (error) {\r\n    console.error('Backend health check failed:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\nexport async function fetchErrors(): Promise<{plotData: PlotDataPoint[], tableData: TableDataPoint[]}> {\r\n  try {\r\n    const response = await fetchWithRetry(`${API_BASE}/errors`);\r\n    const text = await response.text();\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`API returned status ${response.status}`);\r\n    }\r\n\r\n    let backendErrors;\r\n    try {\r\n      backendErrors = JSON.parse(text);\r\n    } catch (parseError: unknown) {\r\n      console.error('Failed to parse errors response:', parseError, 'Response:', text);\r\n      throw new Error('Invalid errors response format');\r\n    }\r\n\r\n    if (!backendErrors) {\r\n      throw new Error('Empty errors response');\r\n    }\r\n\r\n    // Enhanced error data processing with better type safety\r\n    const processErrorData = (err: RawErrorData) => {\r\n      if (!err.id) {\r\n        console.error('Backend error data missing ID:', err);\r\n        throw new Error('Backend error data is missing required id field');\r\n      }\r\n      \r\n      const meanPred = typeof err.meanPrediction === 'number' ? err.meanPrediction : 0;\r\n      const errorVal = typeof err.error === 'number' ? err.error : 0;\r\n      \r\n      return {\r\n        id: err.id,\r\n        timePeriod: err.timePeriod || new Date().toISOString(),\r\n        meanPrediction: meanPred,\r\n        error: errorVal,\r\n        percentageError: typeof err.percentageError === 'number' \r\n          ? err.percentageError \r\n          : (meanPred ? (errorVal / meanPred) * 100 : 0),\r\n        status: err.exceedsThreshold ? 'Alert' : 'Normal'\r\n      };\r\n    };\r\n\r\n    // Handle both array and object response formats\r\n    const errors = Array.isArray(backendErrors) ? \r\n      {plotData: [], tableData: backendErrors} : \r\n      backendErrors;\r\n      \r\n    const plotData: PlotDataPoint[] = (errors.plotData || []).map((err: RawErrorData) => {\r\n      const timePeriod = err.timePeriod || new Date().toISOString();\r\n      const errorValue = typeof err.error === 'number' ? err.error : 0;\r\n      return {\r\n        x: timePeriod,\r\n        y: errorValue,\r\n        exceedsThreshold: Boolean(err.exceedsThreshold)\r\n      } as PlotDataPoint;\r\n    });\r\n\r\n    const tableData: TableDataPoint[] = (errors.tableData || []).map((err: RawErrorData) => {\r\n      const timePeriod = err.timePeriod || new Date().toISOString();\r\n      const meanPrediction = typeof err.meanPrediction === 'number' ? err.meanPrediction : 0;\r\n      const errorValue = typeof err.error === 'number' ? err.error : 0;\r\n      const percentageError = typeof err.percentageError === 'number' ? err.percentageError : 0;\r\n      return {\r\n        id: err.id || '',\r\n        timePeriod: timePeriod,\r\n        meanPrediction: meanPrediction,\r\n        error: errorValue,\r\n        percentageError: percentageError,\r\n        status: err.exceedsThreshold ? 'Alert' : 'Normal'\r\n      } as TableDataPoint;\r\n    });\r\n\r\n    // If no data, generate sample data\r\n    if (plotData.length === 0 && tableData.length === 0) {\r\n      console.warn('No error data received, generating sample data');\r\n      const sampleErrors: RawErrorData[] = Array.from({length: 10}, (_, i) => ({\r\n        id: `MISSING_BACKEND_ID_${i}`,\r\n        timePeriod: new Date(Date.now() - (i * 86400000)).toISOString(),\r\n        meanPrediction: Math.random() * 100,\r\n        error: Math.random() * 20,\r\n        exceedsThreshold: Math.random() > 0.7,\r\n        percentageError: Math.random() * 30\r\n      }));\r\n\r\n      return {\r\n        plotData: sampleErrors.map((err: RawErrorData) => ({\r\n          x: err.timePeriod || new Date().toISOString(),\r\n          y: err.error || 0,\r\n          exceedsThreshold: Boolean(err.exceedsThreshold)\r\n        } as PlotDataPoint)),\r\n        tableData: sampleErrors.map((err: RawErrorData) => ({\r\n          id: err.id || '',\r\n          timePeriod: err.timePeriod || new Date().toISOString(),\r\n          meanPrediction: err.meanPrediction || 0,\r\n          error: err.error || 0,\r\n          percentageError: err.percentageError || 0,\r\n          status: err.exceedsThreshold ? 'Alert' : 'Normal'\r\n        } as TableDataPoint))\r\n      };\r\n    }\r\n\r\n    return { plotData, tableData };\r\n  } catch (error) {\r\n    console.error('Failed to fetch errors:', error);\r\n    \r\n    // Generate comprehensive fallback data\r\n      const sampleErrors: RawErrorData[] = Array.from({length: 10}, (_, i) => ({\r\n        id: `MISSING_BACKEND_ID_${i}`,\r\n        timePeriod: new Date(Date.now() - (i * 86400000)).toISOString(),\r\n        meanPrediction: Math.random() * 100,\r\n        error: Math.random() * 20,\r\n        exceedsThreshold: Math.random() > 0.7,\r\n        percentageError: Math.random() * 30\r\n      }));\r\n\r\n      return {\r\n        plotData: sampleErrors.map((err: RawErrorData) => ({\r\n          x: err.timePeriod || new Date().toISOString(),\r\n          y: err.error || 0,\r\n          exceedsThreshold: Boolean(err.exceedsThreshold)\r\n        } as PlotDataPoint)),\r\n        tableData: sampleErrors.map((err: RawErrorData) => ({\r\n          id: err.id || '',\r\n          timePeriod: err.timePeriod || new Date().toISOString(),\r\n          meanPrediction: err.meanPrediction || 0,\r\n          error: err.error || 0,\r\n          percentageError: err.percentageError || 0,\r\n          status: err.exceedsThreshold ? 'Alert' : 'Normal'\r\n        } as TableDataPoint))\r\n    };\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 533, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/User/Downloads/db__-main/db__-main/octave-drift-detection/src/app/mode1/page.tsx"],"sourcesContent":["'use client'\nimport React, { useEffect, useState, useRef } from 'react'\nimport { JSX } from 'react/jsx-runtime'\nimport { Chart, registerables } from 'chart.js'\nChart.register(...registerables)\nimport Head from 'next/head'\nimport { fetchMode1KPIs, fetchErrors, fetchMode1XAIData } from '../../services/backendService'\n\ninterface KPI {\n  rowKey: string\n  value: string\n  status?: string\n  // Removed id field as per requirements\n}\n\ninterface PlotDataPoint {\n  x: string\n  y: number \n  exceedsThreshold: boolean\n}\n\ninterface TableDataPoint {\n  id: string\n  timePeriod: string\n  meanPrediction: number\n  error: number\n  percentageError: number\n  status: string\n  exceedsThreshold?: boolean\n}\n\ninterface RawErrorData {\n  id?: string\n  timePeriod?: string\n  meanPrediction?: number\n  error?: number\n  percentageError?: number\n  exceedsThreshold?: boolean\n}\n\ninterface ErrorDataState {\n  plotData: PlotDataPoint[]\n  tableData: TableDataPoint[]\n}\n\nexport default function Mode1Page(): JSX.Element {\n  const chartRef = useRef<Chart | null>(null)\n  const [businessUnits, setBusinessUnits] = useState<string[]>(['CCS', 'JMSL'])\n  const [useCases, setUseCases] = useState<{[key: string]: string[]}>({\n    'CCS': ['CC-Di', 'CC-MT'],\n    'JMSL': ['JM-Ch']\n  })\n  const [businessUnit, setBusinessUnit] = useState<string>('')\n  const [useCase, setUseCase] = useState<string>('')\n  const [kpis, setKpis] = useState<KPI[]>([])\n  const [errors, setErrors] = useState<ErrorDataState>({ \n    plotData: [], \n    tableData: [] \n  })\n  const [xaiExplanation, setXaiExplanation] = useState<string>('')\n  const [backendError, setBackendError] = useState<string|null>(null)\n  const [loading, setLoading] = useState<boolean>(true)\n\n  // Initialize data\n  const initData = async (): Promise<void> => {\n    setLoading(true);\n    setBackendError(null);\n    try {\n        const savedBusinessUnit = localStorage.getItem('businessUnit')\n        const savedUseCase = localStorage.getItem('useCase')\n        if (savedBusinessUnit) setBusinessUnit(savedBusinessUnit)\n        if (savedUseCase) setUseCase(savedUseCase)\n        \n        const [kpiData, errorData, xaiData] = await Promise.all([\n          fetchMode1KPIs(),\n          fetchErrors(),\n          fetchMode1XAIData()\n        ])\n        \n        // Transform the ErrorData[] into our ErrorDataState format\n        const processedErrorData: ErrorDataState = {\n          plotData: Array.isArray(errorData) ? \n            errorData.map((err: RawErrorData) => ({\n              x: err.timePeriod || '',\n              y: err.error || 0,\n              exceedsThreshold: err.exceedsThreshold || false\n            })) : \n            errorData?.plotData?.map((err: RawErrorData) => ({\n              x: err.timePeriod || '',\n              y: err.error || 0,\n              exceedsThreshold: err.exceedsThreshold || false\n            })) || [],\n          tableData: Array.isArray(errorData) ? \n            errorData.map((err: RawErrorData) => ({\n              id: err.id || `ERR-${Date.now()}`,\n              timePeriod: err.timePeriod || '',\n              meanPrediction: err.meanPrediction || 0,\n              error: err.error || 0,\n              percentageError: err.percentageError || 0,\n              status: err.exceedsThreshold ? 'Alert' : 'Normal'\n            })) : \n            errorData?.tableData?.map((err: RawErrorData) => ({\n              id: err.id || `ERR-${Date.now()}`,\n              timePeriod: err.timePeriod || '',\n              meanPrediction: err.meanPrediction || 0,\n              error: err.error || 0,\n              percentageError: err.percentageError || 0,\n              status: err.exceedsThreshold ? 'Alert' : 'Normal'\n            })) || []\n        }\n        \n        setKpis(kpiData)\n        setErrors(processedErrorData)\n        setXaiExplanation(xaiData || 'No explanation available')\n        console.log('RAW BACKEND RESPONSES:', {\n          kpiData: JSON.parse(JSON.stringify(kpiData)),\n          errorData: JSON.parse(JSON.stringify(errorData)), \n          xaiData: JSON.parse(JSON.stringify(xaiData))\n        })\n      } catch (error) {\n        console.error('Error loading data - full error:', error);\n        if (error instanceof Error) {\n          setBackendError(`Failed to load data: ${error.message}`);\n        } else {\n          setBackendError('Failed to load data: Unknown error');\n        }\n        \n        // Generate comprehensive fallback data\n        const sampleErrors = Array.from({length: 10}, (_, i) => ({\n          id: `ERR-SAMPLE-${i+1}`,\n          timePeriod: `2023-01-${String(i+1).padStart(2, '0')}`,\n          meanPrediction: Math.random() * 100,\n          error: Math.random() * 20,\n          exceedsThreshold: Math.random() > 0.7,\n          percentageError: Math.random() * 30\n        }))\n        \n        setKpis([\n          {rowKey: 'alertTime', value: new Date().toISOString(), status: 'Normal'},\n          {rowKey: 'runtimeCount', value: '5', status: 'Normal'},\n          {rowKey: 'alertKeeper', value: 'Sample User', status: 'Normal'},\n          {rowKey: 'kstest', value: '0.12', status: 'Normal'},\n          {rowKey: 'wasserstein', value: '0.08', status: 'Normal'},\n          {rowKey: 'mseRef', value: '0.25', status: 'Normal'},\n          {rowKey: 'mseCurrent', value: '0.32', status: 'Warning'},\n          {rowKey: 'status', value: 'Warning', status: 'Warning'}\n        ])\n        \n        setErrors({\n          plotData: sampleErrors.map(err => ({\n            x: err.timePeriod,\n            y: err.error,\n            exceedsThreshold: err.exceedsThreshold\n          })),\n          tableData: sampleErrors.map(err => ({\n            id: err.id,\n            timePeriod: err.timePeriod,\n            meanPrediction: err.meanPrediction,\n            error: err.error,\n            percentageError: err.percentageError,\n            status: err.exceedsThreshold ? 'Alert' : 'Normal'\n          }))\n        })\n        \n        setXaiExplanation('Sample explanation: The model shows moderate drift with 5.2% precision change and -2.1% recall change')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    useEffect(() => {\n      initData()\n  }, [])\n\n  const handleBusinessUnitChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    const value = e.target.value\n    setBusinessUnit(value)\n    setUseCase('')\n    localStorage.setItem('businessUnit', value)\n  }\n\n  const handleUseCaseChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    const value = e.target.value\n    setUseCase(value)\n    localStorage.setItem('useCase', value)\n  }\n\n  return (\n    <div className=\"bg-gray-900 min-h-screen flex flex-col\">\n      <Head>\n        <title>Mode 1 | Business Dashboard</title>\n      </Head>\n\n      <main className=\"flex-grow container mx-auto px-4 py-8\">\n        {backendError && (\n          <div className=\"bg-red-900/50 border border-red-700 rounded-lg p-4 mb-6\">\n            <div className=\"flex items-center\">\n              <svg className=\"h-5 w-5 text-red-300 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n              </svg>\n              <h3 className=\"text-lg font-medium text-red-300\">Backend Error</h3>\n            </div>\n            <p className=\"mt-2 text-red-200\">{backendError}</p>\n            <p className=\"mt-2 text-red-200 text-sm\">Displaying fallback data. Some features may be limited.</p>\n            <button \n              onClick={() => initData()}\n              className=\"mt-3 px-4 py-2 bg-red-800/50 hover:bg-red-800 text-white rounded-md text-sm font-medium\"\n            >\n              Retry Connection\n            </button>\n          </div>\n        )}\n        {/* Header Section */}\n        <div className=\"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 mb-6 border border-gray-700\">\n          <h2 className=\"text-2xl font-semibold text-blue-300 mb-4\">OCTAVE - RG Dashboard</h2>\n          \n          {/* Business Unit and Use Case Selector */}\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n            <div className=\"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50\">\n              <h3 className=\"text-lg font-medium text-blue-200 mb-2\">Business Unit</h3>\n              <select\n                className=\"w-full bg-gray-700 border-blue-600 rounded p-2 text-white\"\n                value={businessUnit}\n                onChange={handleBusinessUnitChange}\n              >\n                {businessUnits.map(unit => (\n                  <option key={unit} value={unit}>{unit}</option>\n                ))}\n              </select>\n            </div>\n            <div className=\"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50\">\n              <h3 className=\"text-lg font-medium text-blue-200 mb-2\">Use Case</h3>\n              <select\n                className=\"w-full bg-gray-700 border-blue-600 rounded p-2 text-white\"\n                value={useCase}\n                onChange={handleUseCaseChange}\n                disabled={!businessUnit}\n              >\n                {businessUnit && useCases[businessUnit]?.map(option => (\n                  <option key={option} value={option}>{option}</option>\n                ))}\n              </select>\n            </div>\n            <div className=\"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50\">\n              <h3 className=\"text-lg font-medium text-blue-200 mb-2\">Short Code</h3>\n              <input\n                type=\"text\"\n                value={businessUnit && useCase ? `${businessUnit.substring(0,2)}-${useCase.substring(0,2)}` : '-'}\n                readOnly\n                className=\"w-full bg-gray-700 border-blue-600 rounded p-2 text-white\"\n              />\n            </div>\n            <div className=\"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50\">\n              <h3 className=\"text-lg font-medium text-blue-200 mb-2\">Runtime</h3>\n              <input\n                type=\"text\"\n                value=\"2h 45m\"\n                readOnly\n                className=\"w-full bg-gray-700 border-blue-600 rounded p-2 text-white\"\n              />\n            </div>\n          </div>\n\n          {/* Key Metrics */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div className=\"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50\">\n              <h3 className=\"text-lg font-medium text-blue-200 mb-2\">Current Alert Time</h3>\n              <p className=\"text-xl\">\n                {loading ? 'Loading...' : kpis.find(k => k.rowKey === 'alertTime')?.value || 'N/A'}\n              </p>\n            </div>\n            <div className=\"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50\">\n              <h3 className=\"text-lg font-medium text-blue-200 mb-2\">No. of Runtime</h3>\n              <p className=\"text-xl\">\n                {loading ? 'Loading...' : kpis.find(k => k.rowKey === 'runtimeCount')?.value || '0'}\n              </p>\n            </div>\n            <div className=\"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50\">\n              <h3 className=\"text-lg font-medium text-blue-200 mb-2\">Alert Keeper</h3>\n              <p className=\"text-xl\">\n                {loading ? 'Loading...' : kpis.find(k => k.rowKey === 'alertKeeper')?.value || 'N/A'}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* MAPE/MSE Plot Section */}\n        <div className=\"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 mb-6 border border-gray-700\">\n          <h2 className=\"text-2xl font-semibold text-blue-300 mb-4\">MAPE/MSE Plot</h2>\n          <div className=\"h-64 bg-gray-700 rounded p-4\">\n            {loading ? (\n              <div className=\"flex items-center justify-center h-full\">\n                <div className=\"text-white\">Loading plot data...</div>\n              </div>\n            ) : (\n              <div className=\"relative h-full\">\n                <canvas \n                  id=\"mapeMseChart\"\n                  className=\"w-full h-full\"\n                  ref={(el) => {\n                    if (el && !loading) {\n                      const ctx = el.getContext('2d');\n                      if (ctx) {\n                        if (chartRef.current) {\n                          chartRef.current.destroy();\n                        }\n                        chartRef.current = new Chart(ctx, {\n                          type: 'line',\n                          data: {\n                            labels: errors.plotData.map(item => item.x),\n                            datasets: [\n                              {\n                                label: 'Error Values',\n                                data: errors.plotData.map(item => item.y),\n                                borderColor: 'rgb(75, 192, 192)',\n                                backgroundColor: errors.plotData.map(item => \n                                  item.exceedsThreshold ? 'rgba(255, 99, 132, 0.5)' : 'rgba(54, 162, 235, 0.5)'),\n                                borderWidth: 2,\n                                tension: 0.1\n                              }\n                            ]\n                          },\n                          options: {\n                            responsive: true,\n                            maintainAspectRatio: false,\n                            plugins: {\n                              legend: {\n                                labels: {\n                                  color: '#e5e7eb'\n                                }\n                              },\n                              tooltip: {\n                                mode: 'index',\n                                intersect: false\n                              }\n                            },\n                            scales: {\n                              x: {\n                                title: {\n                                  display: true,\n                                  text: 'Data Points',\n                                  color: '#93c5fd',\n                                  font: {\n                                    weight: 'bold'\n                                  }\n                                },\n                                grid: {\n                                  color: 'rgba(255, 255, 255, 0.1)'\n                                },\n                                ticks: {\n                                  color: '#e5e7eb',\n                                  font: {\n                                    size: 12\n                                  }\n                                }\n                              },\n                              y: {\n                                title: {\n                                  display: true,\n                                  text: 'Error Value',\n                                  color: '#93c5fd',\n                                  font: {\n                                    weight: 'bold'\n                                  }\n                                },\n                                beginAtZero: true,\n                                grid: {\n                                  color: 'rgba(255, 255, 255, 0.1)'\n                                },\n                                ticks: {\n                                  color: '#e5e7eb',\n                                  font: {\n                                    size: 12\n                                  },\n                                  callback: (value) => typeof value === 'number' ? value.toFixed(2) : value\n                                }\n                              }\n                            },\n                            animation: {\n                              duration: 1000,\n                              easing: 'easeInOutQuad'\n                            },\n                            elements: {\n                              point: {\n                                radius: 4,\n                                hoverRadius: 6\n                              }\n                            }\n                          }\n                        });\n                      }\n                    }\n                  }}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* KPIs Section */}\n        <div className=\"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 mb-6 border border-gray-700\">\n          <h2 className=\"text-2xl font-semibold text-blue-300 mb-4\">Key Performance Indicators</h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4\">\n            <div className=\"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50\">\n              <h3 className=\"text-lg font-medium text-blue-200 mb-2\">KStest</h3>\n              <p className=\"text-xl\">\n                {loading ? 'Loading...' : kpis.find(k => k.rowKey === 'kstest')?.value || 'N/A'}\n              </p>\n            </div>\n            <div className=\"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50\">\n              <h3 className=\"text-lg font-medium text-blue-200 mb-2\">Wasserstein</h3>\n              <p className=\"text-xl\">\n                {loading ? 'Loading...' : kpis.find(k => k.rowKey === 'wasserstein')?.value || 'N/A'}\n              </p>\n            </div>\n            <div className=\"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50\">\n              <h3 className=\"text-lg font-medium text-blue-200 mb-2\">Ref MSE</h3>\n              <p className=\"text-xl\">\n                {loading ? 'Loading...' : kpis.find(k => k.rowKey === 'mseRef')?.value || 'N/A'}\n              </p>\n            </div>\n            <div className=\"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50\">\n              <h3 className=\"text-lg font-medium text-blue-200 mb-2\">MSE</h3>\n              <p className=\"text-xl\">\n                {loading ? 'Loading...' : kpis.find(k => k.rowKey === 'mseCurrent')?.value || 'N/A'}\n              </p>\n            </div>\n            <div className=\"bg-blue-900/30 p-4 rounded-lg border border-blue-800/50\">\n              <h3 className=\"text-lg font-medium text-blue-200 mb-2\">Status</h3>\n              <p className={`text-xl ${\n                loading ? '' : \n                kpis.find(k => k.rowKey === 'status')?.value === 'Warning' ? 'text-yellow-400' : \n                kpis.find(k => k.rowKey === 'status')?.value === 'Error' ? 'text-red-400' : \n                'text-green-400'\n              }`}>\n                {loading ? 'Loading...' : kpis.find(k => k.rowKey === 'status')?.value || 'N/A'}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Debug Data Section */}\n        <div className=\"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 mb-6 border border-gray-700\">\n          <h2 className=\"text-2xl font-semibold text-blue-300 mb-4\">Debug Data</h2>\n          <div className=\"space-y-3 text-white text-xs overflow-auto max-h-60\">\n            <pre>{JSON.stringify({\n              kpis: kpis,\n              errors: errors,\n              xaiExplanation: xaiExplanation\n            }, null, 2)}</pre>\n          </div>\n        </div>\n\n        {/* XAI Result Section */}\n        <div className=\"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 mb-6 border border-gray-700\">\n          <h2 className=\"text-2xl font-semibold text-blue-300 mb-4\">XAI Result</h2>\n          <div className=\"space-y-3 text-white\">\n            {loading ? (\n              <p>Loading XAI explanation...</p>\n            ) : xaiExplanation ? (\n              <p>{xaiExplanation}</p>\n            ) : (\n              <p className=\"text-red-400\">No explanation available</p>\n            )}\n          </div>\n        </div>\n\n        {/* Error Tables Section */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Error Comparison */}\n          <div className=\"bg-gray-800 rounded-xl shadow-md overflow-hidden p-6 border border-gray-700\">\n            <h2 className=\"text-2xl font-semibold text-blue-300 mb-4\">Error Comparison</h2>\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full divide-y divide-gray-700\">\n                <thead>\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-blue-200 uppercase tracking-wider\">ID</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-blue-200 uppercase tracking-wider\">Time Period</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-blue-200 uppercase tracking-wider\">Error</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-gray-700\">\n                  {errors.tableData.slice(0, 5).map((error, index) => (\n                    <tr key={error.id}>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-white\">{error.id}</td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-white\">{error.timePeriod}</td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-red-400\">{error.error.toFixed(2)}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n\n          {/* Threshold Exceedances */}\n          <div className=\"bg-red-900/20 rounded-xl shadow-md overflow-hidden p-6 border border-red-800/50\">\n            <h2 className=\"text-2xl font-semibold text-red-300 mb-4\">Threshold Exceedances</h2>\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full divide-y divide-red-800/50\">\n                <thead>\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-red-200 uppercase tracking-wider\">ID</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-red-200 uppercase tracking-wider\">Error %</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-red-200 uppercase tracking-wider\">Exceeds</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-red-800/50\">\n                  {errors.tableData\n                    .filter((e: TableDataPoint) => e.status === 'Alert')\n                    .slice(0, 5)\n                    .map((error: TableDataPoint) => (\n                      <tr key={error.id}>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-white\">{error.id}</td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-white\">{error.percentageError.toFixed(2)}%</td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-red-300\">\n                          {error.status === 'Alert' ? 'Yes' : 'No'}\n                        </td>\n                      </tr>\n                    ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}